<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Oblako_Team</title>

  <style>
  :root{
    --bg:#0c0f13;
    --panel:#0f1720;
    --light:#f6f7fb;
    --muted:#9aa7b7;
    --accent:#9b5de5; /* фиолетовый акцент */
    --cloud:#ffffff;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, Arial, sans-serif;background:linear-gradient(180deg,#07090b 0%,var(--bg) 100%);color:var(--light);min-height:100vh;position:relative;overflow-x:hidden}
  .top{display:flex;justify-content:space-between;align-items:center;padding:14px 20px;position:relative;z-index:3}
  .logo{font-weight:800;color:var(--accent);font-size:20px}
  .cart-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--light);padding:8px 12px;border-radius:8px;cursor:pointer}

  /* tabs */
  .tabs{display:flex;justify-content:center;gap:10px;background:transparent;padding:10px;position:sticky;top:68px;z-index:3}
  .tab{border:none;background:rgba(255,255,255,0.06);color:var(--light);font-weight:700;padding:8px 14px;border-radius:10px;cursor:pointer;transition:all .18s}
  .tab.active{background:var(--light);color:#071028;box-shadow:0 12px 30px rgba(0,0,0,0.6)}
  .hero{text-align:center;padding:28px 16px 10px}

  /* grid / cards */
  .grid{max-width:1100px;margin:18px auto;padding:12px;display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:18px;z-index:3;position:relative}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:12px;box-shadow:0 8px 28px rgba(2,6,23,0.6);display:flex;flex-direction:column;height:100%;transition:transform .14s ease;opacity:0;animation:fadeIn .45s ease forwards}
  .card:hover{transform:translateY(-6px)}
  .card img{width:100%;height:160px;object-fit:cover;border-radius:8px;border:1px solid rgba(255,255,255,0.04)}
  .title{font-size:15px;margin:10px 0 6px;font-weight:700;color:var(--light)}
  .price{color:var(--accent);font-weight:800;font-size:16px;margin-bottom:8px}
  .meta{color:var(--muted);font-size:13px;margin-top:auto;display:flex;justify-content:space-between;align-items:center}
  .btn-buy{background:var(--accent);color:#071028;border:0;padding:8px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn-buy:hover{box-shadow:0 0 12px var(--accent);transform:translateY(-2px)}

  @keyframes fadeIn { from {opacity:0; transform:translateY(14px);} to {opacity:1; transform:translateY(0);} }

  /* clouds background - inline SVGs will use these classes */
  .clouds-bg{position:fixed;inset:0;z-index:0;overflow:hidden;pointer-events:none}
  .cloud{position:absolute;opacity:0.25;filter:blur(8px);transform-origin:center;will-change:transform}
  .c1{width:340px;height:130px;top:6%;left:-30%;animation:float1 22s linear infinite}
  .c2{width:260px;height:100px;top:32%;left:-40%;animation:float2 26s linear infinite}
  .c3{width:380px;height:150px;top:58%;left:-35%;animation:float3 30s linear infinite}
  .c4{width:220px;height:90px;top:78%;left:-25%;animation:float4 24s linear infinite}
  @keyframes float1{0%{transform:translateX(0)}50%{transform:translateX(80vw) translateY(8px)}100%{transform:translateX(160vw)}}
  @keyframes float2{0%{transform:translateX(0)}50%{transform:translateX(70vw) translateY(-6px)}100%{transform:translateX(140vw)}}
  @keyframes float3{0%{transform:translateX(0)}50%{transform:translateX(90vw) translateY(10px)}100%{transform:translateX(180vw)}}
  @keyframes float4{0%{transform:translateX(0)}50%{transform:translateX(85vw) translateY(-8px)}100%{transform:translateX(170vw)}}

  /* modal */
  .modal.hidden{display:none}
  .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:60}
  .modal-backdrop{position:absolute;inset:0;background:linear-gradient(180deg,rgba(2,6,23,0.6),rgba(2,6,23,0.8));backdrop-filter:blur(4px)}
  .modal-panel{position:relative;background:var(--panel);border-radius:12px;padding:18px;max-width:820px;width:92%;z-index:62;box-shadow:0 30px 80px rgba(2,6,23,0.8);display:grid;grid-template-columns:260px 1fr;gap:12px;align-items:start}
  .modal-panel.small{max-width:420px;grid-template-columns:1fr}
  .modal-img{width:100%;height:220px;object-fit:cover;border-radius:8px;border:1px solid rgba(255,255,255,0.04)}
  .modal-close{position:absolute;right:12px;top:8px;background:transparent;border:0;color:var(--light);font-size:18px;cursor:pointer}
  .modal h2{margin:0 0 6px 0}
  .modal .desc{color:var(--muted)}
  .modal .price{font-weight:800;color:var(--accent);margin-top:6px}
  @media(max-width:760px){.modal-panel{grid-template-columns:1fr}.modal-img{height:200px}.grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
  .bottom{padding:18px 12px;text-align:center;color:var(--muted);position:relative;z-index:3}
  .top, .tabs, main, footer { position: relative; z-index: 3; }
  .cart-row{padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.04);display:flex;justify-content:space-between;align-items:center}
  </style>
</head>
<body>
  <!-- inline clouds (SVG) — чтобы не было 404 -->
  <div class="clouds-bg" aria-hidden="true">
    <!-- simple cloud svg repeated -->
    <svg class="cloud c1" viewBox="0 0 200 80" preserveAspectRatio="xMidYMid meet">
      <g fill="white" opacity="0.95">
        <ellipse cx="50" cy="40" rx="50" ry="30"></ellipse>
        <ellipse cx="100" cy="30" rx="40" ry="26"></ellipse>
        <ellipse cx="150" cy="40" rx="45" ry="30"></ellipse>
      </g>
    </svg>

    <svg class="cloud c2" viewBox="0 0 200 80" preserveAspectRatio="xMidYMid meet">
      <g fill="white" opacity="0.9">
        <ellipse cx="40" cy="40" rx="40" ry="24"></ellipse>
        <ellipse cx="85" cy="30" rx="34" ry="20"></ellipse>
        <ellipse cx="130" cy="40" rx="42" ry="24"></ellipse>
      </g>
    </svg>

    <svg class="cloud c3" viewBox="0 0 240 90" preserveAspectRatio="xMidYMid meet">
      <g fill="white" opacity="0.95">
        <ellipse cx="60" cy="40" rx="60" ry="34"></ellipse>
        <ellipse cx="140" cy="30" rx="50" ry="30"></ellipse>
        <ellipse cx="200" cy="45" rx="40" ry="26"></ellipse>
      </g>
    </svg>

    <svg class="cloud c4" viewBox="0 0 180 70" preserveAspectRatio="xMidYMid meet">
      <g fill="white" opacity="0.9">
        <ellipse cx="50" cy="35" rx="45" ry="26"></ellipse>
        <ellipse cx="110" cy="25" rx="30" ry="18"></ellipse>
      </g>
    </svg>
  </div>

  <header class="top">
    <div class="logo">Oblako<span>Team</span></div>
    <button id="cart-btn" class="cart-btn">Корзина (<span id="cart-count">0</span>)</button>
  </header>

  <!-- вкладки категорий -->
  <nav class="tabs" role="tablist" aria-label="Категории">
    <button data-category="calyan" class="tab active" role="tab" aria-selected="true">Кальяны</button>
    <button data-category="kolby" class="tab" role="tab">Колбы</button>
    <button data-category="mixes" class="tab" role="tab">Смеси</button>
    <button data-category="access" class="tab" role="tab">Аксессуары</button>
  </nav>

  <main>
    <section class="hero">
      <h1>Oblako Team — кальяны и аксессуары</h1>
      <p>Тёмный стиль, мультяшные облака и быстрые заказы через Telegram</p>
    </section>

    <section id="products" class="grid" aria-live="polite"></section>
  </main>

  <!-- Модальное окно товара -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-panel">
      <button id="closeModal" class="modal-close" aria-label="Закрыть">✖</button>
      <img id="modalImg" src="" alt="" class="modal-img">
      <div class="modal-info">
        <h2 id="modalTitle"></h2>
        <p id="modalPrice" class="price"></p>
        <p id="modalDesc" class="desc"></p>
        <div class="modal-actions">
          <button id="buyBtn" class="btn-buy">Добавить в корзину</button>
        </div>
      </div>
    </div>
    <div class="modal-backdrop" tabindex="-1"></div>
  </div>

  <!-- Модальное окно корзины -->
  <div id="cart-modal" class="modal hidden">
    <div class="modal-panel small">
      <button id="close-cart" class="modal-close" aria-label="Закрыть">✖</button>
      <h2>Корзина</h2>
      <div id="cart-items"></div>
      <div class="cart-footer">
        <div>Итого: <span id="cart-total">0</span> грн</div>
        <div class="cart-actions">
          <a id="tg-order" class="btn-buy" href="https://t.me/+380688884410" target="_blank" rel="noreferrer">Оформить через Telegram</a>
        </div>
      </div>
    </div>
    <div class="modal-backdrop" tabindex="-1"></div>
  </div>

  <footer class="bottom">
    <div class="contacts">
      <p>Связь: <a href="https://t.me/+380688884410" target="_blank" id="tg-link">+380 68 888 44 10</a></p>
      <p>Instagram: <a href="#" target="_blank">@OblakoTeam</a></p>
    </div>
    <p>© <span id="year"></span> OblakoTeam</p>
  </footer>

  <script>
  // placeholder svg for missing images (data URL)
  const PLACEHOLDER = 'data:image/svg+xml;utf8,' + encodeURIComponent(
    `<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600">
       <rect width="100%" height="100%" fill="#ddd"/>
       <text x="50%" y="50%" font-size="28" dominant-baseline="middle" text-anchor="middle" fill="#777">Фото отсутствует</text>
     </svg>`
  );

  // products: 4 categories × 10 items (placeholders)
  const products = {
    calyan: Array.from({ length: 10 }, (_, i) => ({
      id: i + 1,
      name: Кальян Tiaga / Sky ${i + 1},
      price: ₴${2200 + i * 50},
      image: PLACEHOLDER,
      desc: Короткое описание кальяна №${i + 1}.,
    })),
    kolby: Array.from({ length: 10 }, (_, i) => ({
      id: i + 1,
      name: Колба ${i + 1},
      price: ₴${400 + i * 30},
      image: PLACEHOLDER,
      desc: Колба №${i + 1}, прочное стекло.,
    })),
    mixes: Array.from({ length: 10 }, (_, i) => ({
      id: i + 1,
      name: Смесь ${i + 1},
      price: ₴${120 + i * 25},
      image: PLACEHOLDER,
      desc: Вкусная смесь ${i + 1}.,
    })),
    access: Array.from({ length: 10 }, (_, i) => ({
      id: i + 1,
      name: Аксессуар ${i + 1},
      price: ₴${80 + i * 20},
      image: PLACEHOLDER,
      desc: Полезный аксессуар ${i + 1}.,
    })),
  };

  const productsContainer = document.getElementById('products');
  const tabs = document.querySelectorAll('.tab');

  // create card element
  function createCard(p){
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${p.image}" alt="${p.name}">
      <div class="title">${p.name}</div>
      <div class="price">${p.price}</div>
      <div class="meta"><button class="btn-buy" data-id="${p.id}">Посмотреть</button></div>
    `;
    card.querySelector('.btn-buy').addEventListener('click', ()=> openModal(p));
    return card;
  }

  // render category
  function render(category){
    const list = products[category] || [];
    productsContainer.innerHTML = '';
    list.forEach(p => productsContainer.appendChild(createCard(p)));
  }

  // tabs logic
  tabs.forEach(t=>{
    t.addEventListener('click', ()=>{
      tabs.forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      render(t.dataset.category);
      window.scrollTo({top: document.getElementById('products').offsetTop - 80, behavior:'smooth'});
    });
  });

  // modal logic
  const modal = document.getElementById('modal');
  const closeModal = document.getElementById('closeModal');
  const modalImg = document.getElementById('modalImg');
  const modalTitle = document.getElementById('modalTitle');
  const modalPrice = document.getElementById('modalPrice');
  const modalDesc = document.getElementById('modalDesc');
  const buyBtn = document.getElementById('buyBtn');

  function openModal(p){
    modalImg.src = p.image;
    modalTitle.textContent = p.name;
    modalPrice.textContent = p.price;
    modalDesc.textContent = p.desc;
    modal.classList.remove('hidden');
    modal.setAttribute('aria-hidden','false');
    buyBtn.onclick = ()=> {
      addToCart(p);
      closeTheModal();
    };
  }

  function closeTheModal(){ modal.classList.add('hidden'); modal.setAttribute('aria-hidden','true'); }
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeTheModal(); });
  document.querySelectorAll('.modal-backdrop').forEach(el=>el.addEventListener('click', closeTheModal));
  document.getElementById('closeModal').addEventListener('click', closeTheModal);

  // cart logic
  let cart = [];
  const cartBtn = document.getElementById('cart-btn');
  const cartModal = document.getElementById('cart-modal');
  const closeCart = document.getElementById('close-cart');
  const cartItems = document.getElementById('cart-items');
  const cartCount = document.getElementById('cart-count');
  const cartTotal = document.getElementById('cart-total');

  cartBtn.addEventListener('click', ()=>{ cartModal.classList.remove('hidden'); });
  closeCart.addEventListener('click', ()=>{ cartModal.classList.add('hidden'); });

  function addToCart(p){
    cart.push(p);
    updateCartUI();
  }
  function updateCartUI(){
    cartItems.innerHTML = '';
    let total = 0;
    cart.forEach((it, idx)=>{
      const el = document.createElement('div');
      el.className = 'cart-row';
      el.innerHTML = <div>${it.name} — ${it.price}</div><div><button data-remove="${idx}">Удалить</button></div>;
      cartItems.appendChild(el);
      total += Number(String(it.price).replace(/[^0-9]/g,'')) || 0;
    });
    cartCount.textContent = cart.length;
    cartTotal.textContent = total;
    cartItems.querySelectorAll('button[data-remove]').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const idx = Number(e.target.getAttribute('data-remove'));
        cart.splice(idx,1);
        updateCartUI();
      });
    });
  }

  // start default
  render('calyan');
  document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
